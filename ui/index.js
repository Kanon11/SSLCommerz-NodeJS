const tingle = require('tingle.js');

export const loadEasyCheckout=(e,t=!1,o=!1)=>{const a=e.url,l=e.logo;window.addEventListener("message",e=>{if(void 0!==e.data){let l={};try{l=JSON.parse(e.data)}catch(e){}if(l&&void 0!==l.status&&"success"===l.status){if(void 0!==l.url&&(-1!==l.url.indexOf("http")?window.location.href=l.url:(l=JSON.parse(l.data),document.write(l.data.url))),void 0!==l.type&&("redirect"!==l.type&&"gw_redirect"!==l.type||(window.location.href=l.url)),void 0!==l.type)if("otp"===l.type){try{n.close(),t?(document.open(),document.write(l.data)):(l=JSON.parse(l.data),document.write(l.data.url))}catch(e){document.write(l.data)}document.close()}else o&&(window.location.href=a);void 0!==l.type&&"resize"===l.type&&void 0!==l.height&&l.height>100&&(o?r.style.minHeight=window.outerHeight-100+"px":r.height=l.height)}}},!1);const n=new tingle.modal({footer:!0,stickyFooter:!1,closeMethods:["button"],closeLabel:"Close",cssClass:["custom-class-1","custom-class-2"],onOpen:()=>{},onClose:()=>{},beforeClose:()=>!0}),s=document.createElement("div"),i=document.createElement("div"),c=document.createElement("div");i.className="client_logo",c.className="client_logo_inner";const d=document.createElement("div");d.setAttribute("class","iframeWrap");const r=document.createElement("iframe");r.src=a+"?full=1",r.name="frame",r.setAttribute("allowFullScreen",""),r.allowFullScreen=!0,r.width=340,r.setAttribute("frameborder","0"),r.scrolling="no",r.allowtransparency=!0,r.seamless=!0,d.appendChild(r);const u=document.createElement("img");u.setAttribute("src",l),u.setAttribute("alt","Logo"),c.appendChild(u),i.appendChild(c),s.appendChild(i),s.appendChild(d),n.setContent(s),n.addFooterBtn("&times;","tingle-modal__close",()=>{n.close()}),n.open()};
